<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>千股K线</title>
    <script src="//cdn.bootcss.com/jquery/3.1.0/jquery.js"></script>
</head>
<body>
    <a target = "_blank" href = "https://www.tougudashi.com/pc/" style="position: fixed; top: 10px; right: 10px; opacity: 0.5">
        <img src="https://www.tougudashi.com/pc/static/img/logo.png" alt="投顾大师">
    </a>
    <div id = "stock_list">

    </div>
    <script>
        $(document).ready(function(){
            // 在这里写你的代码...
            var stock_list = [];
            var img_url = "http://image.sinajs.cn/newchart/daily/n/";
            $.get('http://vip.stock.finance.sina.com.cn/quotes_service/api/json_v2.php/Market_Center.getHQNodeData?page=1&num=5000&sort=changepercent&asc=0&node=sh_a&symbol=', function (res) {
                stock_list = res;
                console.log(stock_list);
                console.log('共有'+stock_list.length+'支股票');
                stock_list.map(function (item, index) {
                    stock_img = img_url + ( /^6/.test(item.code) ? "sh" : "sz" ) + item.ticker +".gif";
                    console.log(item.name, stock_img);
//                    if (index > 20) return;
                    if (/^300/.test(item.ticker)) return;
                    $('#stock_list').append("<div style='display: inline-block; width: 31%; height: 300px; margin: 10px;'><span>"+item.sec_short_name+"</span><img style='width: 100%; height: 100%;' src='" + stock_img  +"' /></div>");

                });

                $('#stock_list').append("<b>Hello</b>");
            });
        });
    </script>
</body>
</html>
